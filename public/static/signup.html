<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>StudyBuddy</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Christopher McDonald">
        <meta name="description" content="A site for finding and reviewing Study Spaces!">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="../style/common.css">
        <link rel="stylesheet" href="../style/signup.css">

        <!-- FontAwesome CDN -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Oxygen" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Titillium+Web" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">

        <!-- jQuery CDN -->
        <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="header">
            <div class="left">
                <div class="name">
                    <a href="/">StudyBuddy</a>
                </div><!--.name-->
            </div><!--.left-->
            <div class="right">
                <i class="fa fa-bars hide-it" aria-hidden="true"></i>
                <div class="dropdown">
                        <ul class="nav">
                            <li><a href="/static/search.html">Custom Search</a></li>
                            <li><a href="/static/review.html">Review</a></li>
                            <li><a href="/static/signup.html">Sign Up</a></li>
                        </ul><!--.nav-->
                </div><!--.dropdown-->
            </div><!--.right-->
        </div><!--.header-->

        <div class="main">
            <h1 class="title">Sign up for StudyBuddy!</h1>
            <br>
            <form class="form" action="POST" onsubmit="validate(event);">
                <div class="form-entry">
                    <label for="first">First Name</label><br>
                    <input type="text" name="first" id="first" required minlength="2">
                </div><br>

                <div class="form-entry">
                    <label for="first">Last Name</label><br>
                    <input type="text" name="last" id="last" required minlength="2">
                </div><br>

                <div class="form-entry">
                    <label for="email">Email</label><br>
                    <input type="email" name="email" id="email" required>
                </div><br>

                <div class="form-entry">
                    <label for="postal">Postal Code</label><br>
                    <input type="text" name="postal" id="postal" required minlength="6" maxlength="6">
                </div><br>

                <div class="form-entry">
                    <label for="pass">Password</label><br>
                    <input type="password" name="pass" id="pass" required minlength="6">
                </div><br>

                <div class="form-entry">
                    <label for="conf-pass">Confirm Password</label><br>
                    <input type="password" name="conf-pass" id="conf-pass" required minlength="6">
                </div><br>

                <input type="submit" class="submit">
            </form>
        </div><!--.main-->

        <footer>
            <p>Built by: Christopher McDonald</p>
            <p class="pull-right">Contact:
                <a href="mailto:mail@christophermcdonald.me">mail@christophermcdonald.me</a>
            </p>
        </footer>
    </body>
    <script>
    validate = (ev) => {
        ev.preventDefault();
        var fname = $(".form-entry > input[name='first']").val();
        var lname = $(".form-entry > input[name='last']").val();
        // name is handled in HTML
        var emailReg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        var email = $(".form-entry > input[name='email']").val();

        if(!emailReg.test(email)) {
            return false;
        } else {
            console.log("Email is good!");
        }

        var postalReg = /([A-Z][0-9][A-Z][0-9][A-Z][0-9])/;
        var postal = $(".form-entry > input[name='postal']").val();

        if(!postalReg.test(postal)) {
            return false;
        } else {
            console.log("Postal is good!");
        }

        var passReg = new RegExp("^(?=.*[a-z|A-Z])(?=.*[0-9])(?=.{6,})");
        var pass = $(".form-entry > input[name='pass']").val();
        var cpass = $(".form-entry > input[name='conf-pass']").val();

        if(!passReg.test(pass)) {
            return false;
        } else {
            console.log("Pass is good!");
        }
        if(!passReg.test(cpass)) {
            return false;
        } else {
            console.log("Conf-Pass is good!");
        }
        if(pass !== cpass) {
            return false;
        } else {
            console.log("PASSes are good!");
        }

        // TODO run ajax
    };
    </script>
</html>
